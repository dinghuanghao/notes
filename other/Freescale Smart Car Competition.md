# Freescale Smart Car Competition

## 成绩

直立组：西部赛区第二名（第一名也是我们学校的，而一个学校只能一支队伍出线）

电磁组：全国一等奖



## 双轮直立车

### 直立

#### 姿态解算

加速度计：噪声严重（机械振动产生的瞬时加速度），平均值稳定

陀螺仪：机械噪声小，但由于积分的缘故，会将MEMOS的热噪声累计，即便做了温漂矫正，也会有一定的漂移。

合成：二者进行卡尔曼滤波

#### 控制

将目标角度和当前角度输入到PD算法中（因为负载非常小，因此没有加积分项），完成自动控制器。



### 转向

#### 赛道识别

线性CCD：赛道的中间为白色，两边为黑色。在输出曲线中，赛道曲线表现为凹槽，其余部分凸起。

+ 运动带来的不稳定性：车身倾斜导致视线距离变化，转弯导致赛道消失，或者看到隔壁赛道。
+ 场景复杂：坡道（双轮车坡道非常困难），环形转弯，十字路口，单引导线等。
+ 各种光强：滤波，自适应阈值，容错处理。



#### 转向控制

模糊PD：使用模糊算法（人工确立表格+重心法解模糊），根据当前的角度、角速度动态更改PD的值。提升转弯的相应速度，并可以一定程度上控制过弯的曲线（内弯和外弯的初始线速度相同，内弯r小，因此导致角速度大，容易翻车）。



### 速度控制

#### 速度采集

编码器：光源 + 环形光栅 + 感光器件 + 微处理器。记录每秒钟的激励数量。可以转化为速度，积分之后转化为距离。可以进行浮空判定、辅助赛道判断等。

#### 控制

将当前速度和期望速度之前的差值作为控制量，用来修改车身的角度，利用重力加速度和直立控制来获得加速。



## 电磁车

用到的算法和技术比直立车要相对更简单，难度在于电磁传感器的标定和非线性方面。还有就是舵机的控制不同于直立车，使用模糊算法容易导致噪声过大。